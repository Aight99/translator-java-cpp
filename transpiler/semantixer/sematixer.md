# Семантический анализатор

> **Вход:** дерево разбора.
>
> Проверяет семантику ЯП путем обхода по дереву разбора и проверкой условий.
>
> **Выход:** дерево разбора (или другое промежуточное представление).

## Объекты проверки

- область видимости
- объявления переменных и функций
- вызов функции с её сигнатурой
- типизация
- лимиты
    - максимальная вложенность скобок
    - максимальную длина строки
    - т.д.

## Ошибки семантического анализатора

- Несоответствие типов.
- Необъявленная переменная или функция.
- Использование зарезервированного идентификатора.
- Многократное объявление переменной в области видимости.
- Неопознанное значение. Коэффициент должен быть целым числом, числом с плавающей запятой, строкой, идентификатором или
  выражением.
- Неверное количество аргументов.
- Тип параметра не равен типу элемента

## Работа семантического анализатора

Семантический работает с корнем дерева разбора, полученного после
работы синтаксического анализатора. Затем проверяется каждое контекстное
условие:

1. При обходе дерева, если в узле встречаем инициализацию переменной,
   то проходим все дерево и проверяем, соответствует ли использование
   указанному типу. Если не соответствует, то ошибка.
2. При обходе дерева, если в узле встречаем использование
   идентификатора переменной или вызов функции, то возвращаемся и
   проверяем наличие объявление идентичного идентификатора или функции.
   Если такого объявления не найдено, то ошибка.
3. При обходе дерева, если в узле встречаем инициализацию переменной,
   то проверяем не является ли эта переменная зарезервированным словом. Если
   не является, то ошибка.
4. При обходе дерева, если в узле встречаем инициализацию переменной,
   то проверяем не инициализируется ли переменная повторно. Если не
   инициализируется, то ошибка.

## Юнит-тесты